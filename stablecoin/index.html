<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RebaseToken 合约演示</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="app.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>🪙 RebaseToken 合约演示</h1>
            <p>基于 Viem 的智能合约交互演示</p>
        </header>

        <div class="status-bar">
            <div class="status-item">
                <span class="label">网络状态:</span>
                <span id="network-status" class="status-value">未连接</span>
            </div>
            <div class="status-item">
                <span class="label">合约地址:</span>
                <span id="contract-address" class="status-value">-</span>
            </div>
        </div>

        <div class="grid">
            <!-- 合约基本信息 -->
            <div class="card">
                <h2>📋 合约信息</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <label>代币名称:</label>
                        <span id="token-name">-</span>
                    </div>
                    <div class="info-item">
                        <label>代币符号:</label>
                        <span id="token-symbol">-</span>
                    </div>
                    <div class="info-item">
                        <label>总供应量:</label>
                        <span id="total-supply">-</span>
                    </div>
                    <div class="info-item">
                        <label>所有者:</label>
                        <span id="owner" class="address">-</span>
                    </div>
                    <div class="info-item">
                        <label>上次 Rebase:</label>
                        <span id="last-rebase">-</span>
                    </div>
                    <div class="info-item">
                        <label>Rebase 间隔:</label>
                        <span id="rebase-interval">-</span>
                    </div>
                </div>
                <button id="refresh-info" class="btn btn-secondary">🔄 刷新信息</button>
            </div>

            <!-- 账户余额 -->
            <div class="card">
                <h2>💰 账户余额</h2>
                <div class="account-list">
                    <div class="account-item">
                        <div class="account-header">
                            <span class="account-label">账户 1 (Owner)</span>
                            <span id="account1-address" class="address">-</span>
                        </div>
                        <div class="balance-info">
                            <div class="balance-item">
                                <span>余额:</span>
                                <span id="account1-balance" class="balance">-</span>
                            </div>
                            <div class="balance-item">
                                <span>份额:</span>
                                <span id="account1-shares" class="shares">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="account-item">
                        <div class="account-header">
                            <span class="account-label">账户 2</span>
                            <span id="account2-address" class="address">-</span>
                        </div>
                        <div class="balance-info">
                            <div class="balance-item">
                                <span>余额:</span>
                                <span id="account2-balance" class="balance">-</span>
                            </div>
                            <div class="balance-item">
                                <span>份额:</span>
                                <span id="account2-shares" class="shares">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="account-item">
                        <div class="account-header">
                            <span class="account-label">账户 3</span>
                            <span id="account3-address" class="address">-</span>
                        </div>
                        <div class="balance-info">
                            <div class="balance-item">
                                <span>余额:</span>
                                <span id="account3-balance" class="balance">-</span>
                            </div>
                            <div class="balance-item">
                                <span>份额:</span>
                                <span id="account3-shares" class="shares">-</span>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="refresh-balances" class="btn btn-secondary">🔄 刷新余额</button>
            </div>

            <!-- 转账功能 -->
            <div class="card">
                <h2>💸 转账操作</h2>
                <div class="transfer-form">
                    <div class="form-group">
                        <label for="from-account">从账户:</label>
                        <select id="from-account">
                            <option value="0">账户 1 (Owner)</option>
                            <option value="1">账户 2</option>
                            <option value="2">账户 3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="to-account">到账户:</label>
                        <select id="to-account">
                            <option value="1">账户 2</option>
                            <option value="2">账户 3</option>
                            <option value="0">账户 1 (Owner)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transfer-amount">转账金额:</label>
                        <input type="number" id="transfer-amount" placeholder="输入转账金额" min="0" step="0.01">
                    </div>
                    <button id="execute-transfer" class="btn btn-primary">💸 执行转账</button>
                </div>
            </div>

            <!-- Rebase 操作 -->
            <div class="card">
                <h2>⚡ Rebase 操作</h2>
                <div class="rebase-info">
                    <p>Rebase 是一种通胀/通缩机制，会调整所有用户的代币余额，但保持其相对份额不变。</p>
                    <div class="rebase-controls">
                        <button id="simulate-time" class="btn btn-warning">⏰ 模拟时间推进</button>
                        <button id="execute-rebase" class="btn btn-danger">⚡ 执行 Rebase</button>
                    </div>
                    <div class="rebase-status">
                        <div class="status-item">
                            <span>当前时间:</span>
                            <span id="current-time">-</span>
                        </div>
                        <div class="status-item">
                            <span>下次 Rebase:</span>
                            <span id="next-rebase-time">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 操作日志 -->
            <div class="card full-width">
                <h2>📝 操作日志</h2>
                <div class="log-container">
                    <div id="log-content" class="log-content">
                        <div class="log-entry info">
                            <span class="timestamp">[启动]</span>
                            <span class="message">页面已加载，等待初始化...</span>
                        </div>
                    </div>
                </div>
                <div class="log-controls">
                    <button id="clear-log" class="btn btn-secondary">🗑️ 清空日志</button>
                    <button id="auto-scroll" class="btn btn-secondary active">📜 自动滚动</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>