# BigBank & Admin åˆçº¦ç³»ç»Ÿ

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºä»¥å¤ªåŠçš„æ™ºèƒ½åˆçº¦ç³»ç»Ÿï¼ŒåŒ…å«äº†é“¶è¡Œå­˜æ¬¾åŠŸèƒ½å’Œç®¡ç†å‘˜èµ„é‡‘ç®¡ç†åŠŸèƒ½ã€‚ç³»ç»Ÿç”±å››ä¸ªä¸»è¦åˆçº¦ç»„æˆï¼š

- **IBank.sol** - é“¶è¡Œåˆçº¦æ¥å£
- **Bank.sol** - åŸºç¡€é“¶è¡Œåˆçº¦ï¼Œå®ç° IBank æ¥å£
- **BigBank.sol** - ç»§æ‰¿è‡ª Bankï¼Œæ·»åŠ æœ€å°å­˜æ¬¾é™åˆ¶
- **Admin.sol** - ç®¡ç†å‘˜åˆçº¦ï¼Œç”¨äºèµ„é‡‘ç®¡ç†

## ğŸ—ï¸ åˆçº¦æ¶æ„

```
IBank (æ¥å£)
    â†‘
Bank (åŸºç¡€å®ç°)
    â†‘
BigBank (ç»§æ‰¿ + æœ€å°å­˜æ¬¾é™åˆ¶)
    â†“ (ç®¡ç†å‘˜æƒé™è½¬ç§»)
Admin (èµ„é‡‘ç®¡ç†)
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
bigBankContract/
â”œâ”€â”€ IBank.sol          # é“¶è¡Œåˆçº¦æ¥å£
â”œâ”€â”€ Bank.sol           # åŸºç¡€é“¶è¡Œåˆçº¦
â”œâ”€â”€ BigBank.sol        # å¤§é“¶è¡Œåˆçº¦ï¼ˆç»§æ‰¿ Bankï¼‰
â”œâ”€â”€ Admin.sol          # ç®¡ç†å‘˜åˆçº¦
â”œâ”€â”€ deploy.js          # éƒ¨ç½²å’Œæµ‹è¯•è„šæœ¬
â”œâ”€â”€ test.html          # Web æµ‹è¯•ç•Œé¢
â””â”€â”€ README.md          # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ åˆçº¦åŠŸèƒ½è¯¦è§£

### IBank æ¥å£
å®šä¹‰äº†é“¶è¡Œåˆçº¦çš„æ ¸å¿ƒåŠŸèƒ½ï¼š
- `deposit()` - å­˜æ¬¾å‡½æ•°
- `withdraw(uint256 amount)` - ææ¬¾å‡½æ•°
- `withdrawAll()` - æå–æ‰€æœ‰èµ„é‡‘
- `getContractBalance()` - è·å–åˆçº¦ä½™é¢
- `getTopDepositors()` - è·å–å‰3åå­˜æ¬¾ç”¨æˆ·
- `transferAdmin(address newAdmin)` - è½¬ç§»ç®¡ç†å‘˜æƒé™

### Bank åˆçº¦
å®ç° IBank æ¥å£çš„åŸºç¡€é“¶è¡ŒåŠŸèƒ½ï¼š
- âœ… ç”¨æˆ·å­˜æ¬¾è®°å½•
- âœ… å‰3åå­˜æ¬¾ç”¨æˆ·æ’è¡Œ
- âœ… ç®¡ç†å‘˜ææ¬¾åŠŸèƒ½
- âœ… å­˜æ¬¾ç”¨æˆ·ç®¡ç†

### BigBank åˆçº¦
ç»§æ‰¿è‡ª Bankï¼Œæ·»åŠ é¢å¤–é™åˆ¶ï¼š
- âœ… **æœ€å°å­˜æ¬¾é™åˆ¶**: 0.001 ETH
- âœ… ä½¿ç”¨ `minDepositRequired` modifier æ§åˆ¶æƒé™
- âœ… é‡å†™ `deposit()` å’Œ `receive()` å‡½æ•°

### Admin åˆçº¦
ç®¡ç†å‘˜èµ„é‡‘ç®¡ç†åˆçº¦ï¼š
- âœ… **Owner æƒé™æ§åˆ¶**
- âœ… `adminWithdraw(IBank bank)` - ä»é“¶è¡Œåˆçº¦æå–èµ„é‡‘
- âœ… èµ„é‡‘è½¬ç§»åˆ° Owner åœ°å€
- âœ… åˆçº¦ä½™é¢æŸ¥è¯¢

## ğŸš€ éƒ¨ç½²å’Œä½¿ç”¨æµç¨‹

### 1. ç¼–è¯‘åˆçº¦
ä½¿ç”¨ Remix IDEã€Hardhat æˆ– Foundry ç¼–è¯‘æ‰€æœ‰åˆçº¦ï¼š

```bash
# ä½¿ç”¨ Hardhat
npx hardhat compile

# ä½¿ç”¨ Foundry
forge build
```

### 2. éƒ¨ç½²åˆçº¦

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Remix IDE
1. åœ¨ Remix ä¸­æ‰“å¼€æ‰€æœ‰ `.sol` æ–‡ä»¶
2. ç¼–è¯‘åˆçº¦
3. å…ˆéƒ¨ç½² `BigBank` åˆçº¦
4. å†éƒ¨ç½² `Admin` åˆçº¦
5. è°ƒç”¨ `BigBank.transferAdmin(adminAddress)` è½¬ç§»æƒé™

#### æ–¹æ³•äºŒï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬
```bash
# å®‰è£…ä¾èµ–
npm install ethers

# é…ç½® deploy.js ä¸­çš„ç§é’¥å’Œ RPC URL
# è¿è¡Œéƒ¨ç½²è„šæœ¬
node deploy.js
```

### 3. æµ‹è¯•æµç¨‹

#### å®Œæ•´æµ‹è¯•æµç¨‹ï¼š
1. **éƒ¨ç½²åˆçº¦**
   - éƒ¨ç½² BigBank åˆçº¦
   - éƒ¨ç½² Admin åˆçº¦

2. **è½¬ç§»ç®¡ç†å‘˜æƒé™**
   ```solidity
   bigBank.transferAdmin(adminContractAddress);
   ```

3. **æ¨¡æ‹Ÿç”¨æˆ·å­˜æ¬¾**
   ```solidity
   // ç”¨æˆ·1å­˜æ¬¾ 0.005 ETH
   bigBank.deposit{value: 0.005 ether}();
   
   // ç”¨æˆ·2å­˜æ¬¾ 0.01 ETH
   bigBank.deposit{value: 0.01 ether}();
   ```

4. **Admin æå–èµ„é‡‘**
   ```solidity
   // Admin åˆçº¦çš„ Owner è°ƒç”¨
   admin.adminWithdraw(bigBankAddress);
   ```

## ğŸŒ Web æµ‹è¯•ç•Œé¢

ä½¿ç”¨ `test.html` è¿›è¡Œå¯è§†åŒ–æµ‹è¯•ï¼š

1. æ‰“å¼€ `test.html` æ–‡ä»¶
2. è¿æ¥ MetaMask é’±åŒ…
3. è¾“å…¥åˆçº¦åœ°å€å¹¶åˆå§‹åŒ–
4. è¿›è¡Œå­˜æ¬¾ã€æŸ¥è¯¢ã€ç®¡ç†å‘˜æ“ä½œç­‰æµ‹è¯•

### ä¸»è¦åŠŸèƒ½ï¼š
- ğŸ”— é’±åŒ…è¿æ¥
- ğŸ’° å­˜æ¬¾æ“ä½œï¼ˆæœ€å° 0.001 ETHï¼‰
- ğŸ“Š ä½™é¢æŸ¥è¯¢
- ğŸ† å‰3åå­˜æ¬¾ç”¨æˆ·æŸ¥è¯¢
- ğŸ‘‘ Admin èµ„é‡‘ç®¡ç†
- ğŸ“ æ“ä½œæ—¥å¿—è®°å½•

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### å®‰å…¨è€ƒè™‘
1. **é‡å…¥æ”»å‡»é˜²æŠ¤**: å½“å‰ä½¿ç”¨ `transfer()` æ–¹æ³•ï¼Œå»ºè®®ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ ReentrancyGuard
2. **æƒé™æ§åˆ¶**: ç¡®ä¿åªæœ‰æ­£ç¡®çš„åœ°å€èƒ½è°ƒç”¨ç®¡ç†å‘˜å‡½æ•°
3. **åœ°å€éªŒè¯**: æ‰€æœ‰åœ°å€å‚æ•°éƒ½è¿›è¡Œäº†é›¶åœ°å€æ£€æŸ¥

### æœ€ä½³å®è·µ
1. **æµ‹è¯•ç½‘ç»œ**: å…ˆåœ¨æµ‹è¯•ç½‘ç»œï¼ˆå¦‚ Sepoliaï¼‰ä¸Šéƒ¨ç½²å’Œæµ‹è¯•
2. **Gas ä¼˜åŒ–**: å¤§é‡ç”¨æˆ·æ—¶è€ƒè™‘ä¼˜åŒ–å­˜å‚¨ç»“æ„
3. **äº‹ä»¶æ—¥å¿—**: æ‰€æœ‰é‡è¦æ“ä½œéƒ½æœ‰äº‹ä»¶è®°å½•

### å·²çŸ¥é™åˆ¶
1. **å­˜æ¬¾ç”¨æˆ·æ•°ç»„**: ä¼šæ— é™å¢é•¿ï¼Œå¤§é‡ç”¨æˆ·æ—¶éœ€è¦ä¼˜åŒ–
2. **æ’åºç®—æ³•**: ä½¿ç”¨å†’æ³¡æ’åºï¼Œæ•ˆç‡è¾ƒä½
3. **å‰ç«¯å…¼å®¹æ€§**: éœ€è¦ MetaMask æˆ–å…¼å®¹çš„ Web3 é’±åŒ…

## ğŸ” æµ‹è¯•ç”¨ä¾‹

### åŸºç¡€åŠŸèƒ½æµ‹è¯•
- âœ… ç”¨æˆ·å­˜æ¬¾ï¼ˆâ‰¥0.001 ETHï¼‰
- âœ… å­˜æ¬¾é‡‘é¢è¿‡å°æ—¶æ‹’ç»ï¼ˆ<0.001 ETHï¼‰
- âœ… å‰3åå­˜æ¬¾ç”¨æˆ·æ’è¡Œæ›´æ–°
- âœ… åˆçº¦ä½™é¢æŸ¥è¯¢

### ç®¡ç†å‘˜åŠŸèƒ½æµ‹è¯•
- âœ… ç®¡ç†å‘˜æƒé™è½¬ç§»
- âœ… Admin åˆçº¦æå–èµ„é‡‘
- âœ… éç®¡ç†å‘˜è°ƒç”¨æ—¶æ‹’ç»
- âœ… Owner æƒé™æ§åˆ¶

### è¾¹ç•Œæ¡ä»¶æµ‹è¯•
- âœ… é›¶åœ°å€æ£€æŸ¥
- âœ… ä½™é¢ä¸è¶³æ—¶çš„å¤„ç†
- âœ… é‡å¤å­˜æ¬¾ç”¨æˆ·å¤„ç†
